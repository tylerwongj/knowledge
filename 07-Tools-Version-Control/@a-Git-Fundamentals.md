# @a-Git-Fundamentals - Essential Version Control for Unity Development

## 🎯 Learning Objectives
- Master Git fundamentals for Unity project management
- Understand Git workflow patterns for game development
- Implement proper .gitignore and LFS configurations
- Develop efficient branching strategies for Unity projects

## 🔧 Core Git Concepts

### Git Repository Basics
```bash
# Initialize new repository
git init
git init --bare # For shared repositories

# Clone existing repository
git clone https://github.com/username/unity-project.git
git clone --recursive https://github.com/username/project-with-submodules.git

# Check repository status
git status
git status --short # Condensed output
git status --porcelain # Machine-readable format

# View commit history
git log
git log --oneline --graph --decorate --all
git log --since="2 weeks ago" --until="1 week ago"
git log --author="Developer Name"
```

### Essential Git Commands
```bash
# Stage changes
git add filename.cs
git add . # Stage all changes
git add --patch # Interactive staging
git add *.cs # Stage all C# files

# Commit changes
git commit -m "Add player movement system"
git commit -am "Update existing files" # Add and commit
git commit --amend # Modify last commit
git commit --amend --no-edit # Keep same message

# View differences
git diff # Working directory vs staging
git diff --staged # Staging vs last commit
git diff HEAD~1 # Compare with previous commit
git diff branch1..branch2 # Compare branches

# Undo changes
git checkout -- filename.cs # Discard working changes
git reset HEAD filename.cs # Unstage file
git reset --soft HEAD~1 # Undo last commit, keep changes
git reset --hard HEAD~1 # Undo last commit, discard changes
```

## 🎮 Unity-Specific Git Configuration

### Unity .gitignore Template
```gitignore
# Unity-specific files
[Ll]ibrary/
[Tt]emp/
[Oo]bj/
[Bb]uild/
[Bb]uilds/
[Ll]ogs/
[Uu]ser[Ss]ettings/

# Never ignore Asset meta data
![Aa]ssets/**/*.meta

# Uncomment this line if you wish to ignore the asset store tools plugin
# [Aa]ssets/AssetStoreTools*

# Visual Studio cache directory
.vs/

# Gradle cache directory
.gradle/

# Autogenerated VS/MD/Consulo solution and project files
*.csproj
*.unityproj
*.sln
*.suo
*.tmp
*.user
*.userprefs
*.pidb
*.booproj
*.svd
*.pdb
*.mdb
*.opendb
*.VC.db

# Unity3D generated meta files
*.pidb.meta
*.pdb.meta
*.mdb.meta

# Unity3D generated file on crash reports
sysinfo.txt

# Builds
*.apk
*.aab
*.unitypackage
*.app

# Crashlytics generated file
crashlytics-build.properties

# Packed Addressables
[Aa]ssets/[Aa]ddressable[Aa]ssets[Dd]ata/*/*.bin*

# Temporary auto-generated Android Assets
[Aa]ssets/[Ss]treamingAssets/aa.meta
[Aa]ssets/[Ss]treamingAssets/aa/*

# OS generated files
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db
```

### Git LFS for Unity Assets
```bash
# Install Git LFS
git lfs install

# Track Unity binary files
git lfs track "*.psd"
git lfs track "*.fbx"
git lfs track "*.png"
git lfs track "*.jpg"
git lfs track "*.mp3"
git lfs track "*.wav"
git lfs track "*.mp4"
git lfs track "*.mov"
git lfs track "*.unity"
git lfs track "*.asset"

# View tracked files
git lfs ls-files
git lfs track

# Push LFS files
git add .gitattributes
git commit -m "Configure Git LFS for Unity assets"
git push origin main
```

## 🌿 Branching Strategies

### Git Flow for Unity Projects
```bash
# Main branches
git checkout -b develop # Development branch
git checkout -b main # Production/release branch

# Feature branches
git checkout -b feature/player-controller develop
git checkout -b feature/inventory-system develop
git checkout -b feature/ui-overhaul develop

# Release branches
git checkout -b release/v1.0.0 develop
git checkout -b hotfix/critical-bug main

# Complete feature workflow
git checkout develop
git pull origin develop
git checkout -b feature/new-weapon-system
# ... make changes ...
git add .
git commit -m "Implement new weapon system"
git push origin feature/new-weapon-system
# Create pull request, merge to develop
git checkout develop
git pull origin develop
git branch -d feature/new-weapon-system
```

### Unity-Specific Branching
```bash
# Scene-based branching (avoid conflicts)
git checkout -b scene/main-menu develop
git checkout -b scene/level-1 develop
git checkout -b scene/boss-arena develop

# System-based branching
git checkout -b system/audio-manager develop
git checkout -b system/save-load develop
git checkout -b system/networking develop

# Platform-specific branches
git checkout -b platform/mobile develop
git checkout -b platform/console develop
git checkout -b platform/vr develop
```

## 🔄 Advanced Git Workflows

### Merge vs Rebase Strategies
```bash
# Merge workflow (preserves history)
git checkout develop
git merge feature/new-system
git push origin develop

# Rebase workflow (clean linear history)
git checkout feature/new-system
git rebase develop
git checkout develop
git merge feature/new-system # Fast-forward merge
git push origin develop

# Interactive rebase (clean up commits)
git rebase -i HEAD~3 # Rebase last 3 commits
# Options: pick, reword, edit, squash, fixup, drop
```

### Collaborative Unity Development
```bash
# Sync with team changes
git fetch origin
git status
git merge origin/develop # Or git rebase origin/develop

# Handle merge conflicts in Unity
git status # Identify conflicted files
# Resolve conflicts in Unity or text editor
git add resolved-file.cs
git commit -m "Resolve merge conflicts in player controller"

# Cherry-pick specific commits
git cherry-pick abc123def # Apply specific commit
git cherry-pick -n abc123def # Cherry-pick without committing

# Stash work in progress
git stash # Stash current changes
git stash pop # Apply and remove from stash
git stash list # View stash history
git stash apply stash@{1} # Apply specific stash
```

## 🛠️ Git Tools and Utilities

### Git Aliases for Unity Development
```bash
# Add to ~/.gitconfig
[alias]
    st = status --short
    br = branch
    co = checkout
    ci = commit
    unstage = reset HEAD --
    last = log -1 HEAD
    visual = !gitk
    unity-log = log --oneline --graph --decorate
    unity-diff = diff --name-only
    clean-unity = clean -fd
    
# Usage
git st # Short status
git unity-log # Pretty log for Unity projects
git clean-unity # Clean Unity temp files
```

### Unity-Specific Git Scripts
```bash
#!/bin/bash
# unity-commit.sh - Smart Unity commit script

# Check for Unity Editor running
if pgrep -x "Unity" > /dev/null; then
    echo "Warning: Unity Editor is running. Close editor before committing."
    read -p "Continue anyway? (y/n): " -n 1 -r
    echo
    if [[ ! $REPLY =~ ^[Yy]$ ]]; then
        exit 1
    fi
fi

# Generate meta files if missing
find Assets/ -name "*.cs" -o -name "*.prefab" -o -name "*.unity" | while read file; do
    if [ ! -f "$file.meta" ]; then
        echo "Warning: Missing .meta file for $file"
    fi
done

# Stage and commit
git add .
git status
read -p "Commit message: " commit_msg
git commit -m "$commit_msg"

echo "Commit completed successfully!"
```

## 🔍 Git Debugging and Maintenance

### Repository Health Checks
```bash
# Check repository integrity
git fsck --full # Check for corruption
git gc --aggressive # Optimize repository
git clean -fd # Remove untracked files/directories

# Analyze repository size
git count-objects -vH # Object count and size
git ls-files | wc -l # Number of tracked files
du -sh .git # Repository size

# Find large files
git rev-list --objects --all | git cat-file --batch-check='%(objecttype) %(objectname) %(objectsize) %(rest)' | sed -n 's/^blob //p' | sort --numeric-sort --key=2 | tail -10

# History analysis
git shortlog -sn # Commit count by author
git log --pretty=format:"%h %an %ad %s" --date=short --since="1 month ago"
```

### Troubleshooting Common Issues
```bash
# Fix detached HEAD
git checkout main # Switch to main branch
git branch temp-branch HEAD # Create branch from detached HEAD
git checkout main
git merge temp-branch # Merge changes if needed

# Recover deleted commits
git reflog # View reference log
git checkout abc123def # Go to specific commit
git checkout -b recovery-branch # Create branch from lost commit

# Fix merge conflicts in Unity scenes
# Use Unity's Smart Merge tool
git config merge.unityyamlmerge.driver "'/Applications/Unity/Unity.app/Contents/Tools/UnityYAMLMerge' merge -p %O %B %A %A"
git config merge.unityyamlmerge.name "Unity YAML Merge"
echo "*.unity merge=unityyamlmerge" >> .gitattributes
```

## 🚀 AI/LLM Integration Opportunities

### Git Workflow Automation
```
Generate Unity-specific Git workflow scripts:
- Input: [project structure, team size, release cycle]
- Output: Custom Git hooks, commit templates, merge strategies
- Include: Automated testing, asset validation, build triggers

Create intelligent commit message generator:
- Analyze: Changed files, code patterns, Unity components
- Generate: Descriptive commit messages following conventions
- Include: Scope detection, breaking change identification

Design Git integration for Unity development:
- Features: [auto-sync, conflict resolution, asset tracking]
- Automation: [pre-commit hooks, post-merge actions, cleanup tasks]
- Integration: [Unity Editor plugins, CI/CD pipelines, team notifications]
```

### Repository Analysis Tools
```
Build Git repository health analyzer:
- Metrics: [commit frequency, author contributions, file change patterns]
- Insights: [hotspots, refactoring opportunities, team collaboration]
- Reports: [Unity-specific analysis, asset usage, performance trends]

Generate Git training materials for Unity teams:
- Content: [workflow guides, best practices, troubleshooting]
- Format: [interactive tutorials, video scripts, documentation]
- Focus: [Unity-specific challenges, team collaboration, release management]
```

## 💡 Key Highlights

### Essential Git Commands for Unity
- **Always use `git status` before committing changes**
- **Configure Git LFS for binary Unity assets**
- **Use Unity YAML Merge for scene conflict resolution**
- **Keep .gitignore updated for Unity-generated files**
- **Stage .meta files alongside corresponding assets**

### Unity Development Best Practices
- **Close Unity Editor before major Git operations**
- **Commit frequently with descriptive messages**
- **Use feature branches for new systems/scenes**
- **Avoid committing during Unity compilation**
- **Test builds after merging branches**

### Team Collaboration Guidelines
- **Establish clear branching conventions**
- **Document merge conflict resolution procedures**
- **Use pull requests for code review**
- **Maintain clean commit history with rebasing**
- **Communicate major changes to team members**

### Performance and Maintenance
- **Regular repository cleanup with `git gc`**
- **Monitor repository size with large asset tracking**
- **Use shallow clones for CI/CD systems**
- **Archive old branches to reduce clutter**
- **Backup critical repositories regularly**

### Advanced Git Features
- **Interactive rebase for commit cleanup**
- **Git hooks for automated workflows**
- **Submodules for shared Unity packages**
- **Git worktrees for parallel development**
- **Bisect for bug hunting in commit history**